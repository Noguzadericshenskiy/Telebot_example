## **Пример Telegram-бота для анализа сайта Hotels.com и поиска подходящих пользователю отелей**

Для работы необходим:

1. Ключ API Hotels
2. Регистрация самого бота на сайте телеграмма и ключ

Ключи необходимо добавить в файл .env, см. файл env.example


### Бот воспринимает следующие команды:

* /help — помощь по командам бота,
* /lowprice — вывод самых дешёвых отелей в городе,
* /highprice — вывод самых дорогих отелей в городе,
* /bestdeal — вывод отелей, наиболее подходящих по цене и расположению от центра.
* /history — вывод истории поиска отелей (последние 5 записей)

Скрипт Telegram-бота написан с использованием библиотеки Pytelegrambotapi

### Описание работы команд


#### **Команда /lowprice**

После ввода команды у пользователя запрашивается:

1. Город, где будет проводиться поиск.
2. Дата въезда
3. Дата выезда
4. Количество отелей, которые необходимо вывести в результате (не больше заранее определённого максимума).
5. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”)
   1. При положительном ответе пользователь также вводит количество необходимых фотографий (не больше заранее определённого максимума)


#### **Команда /highprice**

После ввода команды у пользователя запрашивается:

1. Город, где будет проводиться поиск.
2. Дата въезда
3. Дата выезда
4. Количество отелей, которые необходимо вывести в результате (не больше заранее определённого максимума).
5. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”)
   1. При положительном ответе пользователь также вводит количество необходимых фотографий (не больше заранее определённого максимума)


#### **Команда /bestdeal**

После ввода команды у пользователя запрашивается:

1. Город, где будет проводиться поиск.
2. Дата въезда
3. Дата выезда
4. Диапазон цен.
5. Диапазон расстояния, на котором находится отель от центра.
6. Количество отелей, которые необходимо вывести в результате (не больше заранее определённого максимума).
7. Необходимость загрузки и вывода фотографий для каждого отеля (“Да/Нет”)
   1. При положительном ответе пользователь также вводит количество необходимых фотографий (не больше заранее определённого максимума)


#### **Команда /history**

После ввода команды пользователю выводится история поиска отелей. Сама история содержит:

1. Команду, которую вводил пользователь.
2. Дату и время ввода команды.
3. Отели, которые были найдены.


### FAQ. 

Из-за нестабильности API Hotels возможны неточности работы бота 

Если бот перестал выводить информацию, необходимо проверить URL запросов на сервере с указанными в скрипте, также 
возможны изменения формата самой выводимой информации.

Если Ответ сервера 200, а информации нет, возможно у вас исчерпан лимит или упал API, необходимо подождать.

### Используемые модули и библиотеки
* БД SQLite3 
* Ключи decouple
* Логирование loguru
* PyTelegrambotApi
* telegram_bot_calendar
